sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{formatter:{formatText:function(e){if(e?.includes("%"))return true;return false}},onCheckBoxSelect:function(e){debugger;let t=e.getSource().getParent().getParent().getParent().getParent().getParent().getParent().getParent().getBindingContext();let r;let o;const n=e.getSource().getSelected();const s=e.getSource().getBindingContext();const g=s.getProperty("discount");const a=g.includes("%")?parseFloat(g.slice(0,-1)):parseFloat(g)||0;const i=parseFloat(s.getProperty("actualPrice"));const c=parseInt(s.getProperty("taxPercentage"));const l=s.getProperty("band")?.match(/\(([\d.]+)%\)/);let u=l?.[1]?parseFloat(l[1]):0;if(n&&a+u>=100){sap.m.MessageToast.show("Discount percentage cannot exceed 100.");e.getSource().setSelected(false);return}if(u>0){if(a>0&&n)u=u+a;r=i*((100-u)/100);if(a>0&&!n)r=r-a}else if(a>0&&n){r=i*((100-a)/100)}else if(a>0&&!n){r=i-a}else{r=i}o=r+r*(c/100);s.setProperty("discountedPrice",r.toFixed(2).toString());s.setProperty("totalPrice",o.toFixed(2).toString());debugger;let d=0;let p=0;let P=0;debugger;var f=e.getSource().getParent().getParent().getParent().getRows();for(const e of f){debugger;const t=e.getCells?e.getCells():e.getAggregation("content");debugger;var x=parseFloat(t[5].getContent().mAggregations.contentDisplay.getText());var y=parseFloat(t[9].getContent().mAggregations.contentDisplay.getText());var S=parseFloat(t[11].getContent().mAggregations.contentDisplay.getText());if(x&&y&&S){d=d+y;p=p+(S-y)}}P=d+p;t.setProperty("totalAmount",d.toFixed(2).toString());t.setProperty("taxAmount",p.toFixed(2).toString());t.setProperty("grandTotal",P.toFixed(2).toString());if(g===""||g==="0"){s.setProperty("discount",g);return}if(n&&!g.includes("%")){s.setProperty("discount",`${g}%`)}else if(!n&&g.includes("%")){s.setProperty("discount",g.slice(0,-1))}setTimeout(()=>{},1e3)}}});
//# sourceMappingURL=Discheck.js.map